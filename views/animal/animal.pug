extends ../layout

block content 
  .card-lg-light
    .card-header-primary 
      h3.text-center
        i.fab.fa-earlybirds(style='margin-right: 15px;')
        | #{animal.registration_nr}

    .padding-sm
      h4 Detalii
        button.btn.btn-dark.float-right(type='button', data-toggle='modal', data-target='#animalModal' style='font-size:13px; width: 130px; height: 40px;') Modificati 
          i.far.fa-edit(style='margin-left: 5px;')
      hr
      br
      p Proprietar: 
        a(href='/proprietari/'+proprietar._id)
          strong #{proprietar.name}
      p Specia: 
        strong= animal.species
      p Cantitate: 
        strong= animal.quantity
      p Simpomatologie: 
        strong= animal.simptomatologie
      p Diagnosticul: 
        strong= animal.diagnostic
      
      br
      br
      br
      #dialog-confirm(title='Sunteti siguri?')
        p#dialog-message(style='display: none;')
          span.ui-icon.ui-icon-alert(style='float:left; margin:12px 12px 20px 0; z-index: 7;')
          | Stergerea acest proprietar este permanenta, si toate animalele si tratamentele asociate vor fii sterse in mod permanent.

      #animalModal.modal.fade(tabindex='-1', role='dialog', aria-labelledby='animalModalLabel', aria-hidden= hidden, style='margin-top: 5%;')
        .modal-dialog(role='document')
          .modal-content(style='border-radius: 8px;')
            .modal-header.modal-header-dark
              h5#animalModalLabel.modal-title= animal.registration_nr 
                i.fab.fa-earlybirds(style='margin-left: 5px;')
              button.close(type='button', data-dismiss='modal', aria-label='Close')
                span(aria-hidden='true' style='color: white;') Ã—
            .modal-body
              .row(style='font-size: 14px;') 
                .col-md-10.offset-md-1
                  form#animal-form(method='POST', action='/proprietari/'+proprietar._id+'/animals/edit/'+animal._id)
                    #form-group 
                      label Proprietar                       
                      input.form-control(name='proprietar', type='text', value=proprietar.name, disabled)
                    br
                    .row(style='font-size: 14px;') 
                      .col-md-7
                        #form-group 
                          label Nr. Matricol
                          input.form-control(name='registration_nr', type='text', value=animal.registration_nr) 
                      .col-md-5
                        #form-group 
                          label Specia
                          select.form-control(name='species', type='text', style='font-size: 14px;') 
                            option(value=animal.species, selected hidden, style='font-size: 14px;')= animal.species
                            option(value='Canina') Canina
                            option(value='Felina') Felina
                            option(value='Bovina') Bovina
                            option(value='Cabalina') Cabalina
                            option(value='Suina') Suina
                            option(value='Ovina') Ovina
                            option(value='Pasare') Pasare
                    br
                    .row(style='font-size: 14px;')
                      .col-md-6
                        #form-group 
                          label Animale Tratate
                          input.form-control(name='quantity', type='number', value=animal.quantity, style='font-size: 14px;') 
                    hr
                    br
                    #form-group 
                      label Simptomatologie
                      textarea.form-control(name='simptomatologie', style='font-size: 14px;')=animal.simptomatologie 
                    br
                    #form-group 
                      label Diagnoticul
                      textarea.form-control(name='diagnostic', style='font-size: 14px;')=animal.diagnostic
                    br
                    .modal-footer
                      button#save-animal.btn.btn-primary(type='submit') Salveaza
                      button.btn.btn-secondary(type='button', data-dismiss='modal') Inchide

                  br
                  hr
                  a.btn.btn-outline-danger.delete-animal(href='#' style= 'margin-left: 25%;' data-animal-id=animal._id data-proprietar-id=proprietar._id) Stergeti Acest Matricol

      .row
        .col-md-3
          h3 Tratamente
        .col-md-6
          .input-form.form-search
            input.form-control.search-tratamente(type='text', placeholder='Gaseste tratamente ...')

      br

      a.btn.btn-outline-primary(href='/animals/'+animal._id+'/tratamente/add') Adauga tratament
        i.fas.fa-syringe(style='margin-left: 5px;')
      br
      br
      br
      .col-md-12(style='overflow-x:auto; min-height: 300px; max-height: 300px; overflow-y:scroll;')
        table.table#results-tratamente(style='min-width: 500px; font-size: 14px;')
          thead
            tr
              th.align-middle Status
              th.align-middle Data
              th.align-middle Produsul
              th.align-middle Doza
              th.align-middle Asteptare
              th.align-middle Durata

          each tratament, i in tratamente
            tbody.containerItems
              tr.item.inbox-list(data-search=tratament.name onclick=`window.location.href='/animals/${tratament.animal_id}/tratamente/${tratament._id}'`)
                td
                  -if(tratament.result == "Vindecat")
                    .status-success(style="width:23px" data-toggle='tooltip', title='Vindecat')
                  -if(tratament.result == "Mort")
                    .status-danger(style="width:23px"  data-toggle='tooltip', title='Mort')
                  -if(tratament.result == "Sacrificat")
                    .status-purple(style="width:23px"  data-toggle='tooltip', title='Sacrificat')
                td.date.align-middle= moment(tratament.administration_date).format("DD-MMMM-YYYY")
                td.align-middle= tratament.name
                td.align-middle= tratament.dose
                td.align-middle= tratament.waiting_time
                td.align-middle= tratament.duration 

      br