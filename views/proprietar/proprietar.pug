extends ../layout
include ../components/number_form.pug

block content 

  .card-lg-light
    .card-header-primary 
      h3.proprietar_name.text-center 
        i.fas.fa-user(style='margin-right: 15px;' )
        | #{proprietar.name}

    .padding-sm
      h4.align-middle Detalii
        button.btn.btn-dark.float-right(type='button', data-toggle='modal', data-target='#proprietarModal' style='font-size:13px; width: 130px; height: 40px;') Modificati 
          i.far.fa-edit(style='margin-left: 5px;')
      hr
      br
      .row
        .col-md-2
          p.font-weight-bold.p-2.m-0 Adresa: 
        .col-md-3
          input.form-control.p-2.m-0.pl-2(value=proprietar.address disabled)
      br
      .row
        .col-md-2
          p.font-weight-bold.p-2.m-0 Nr Tel: 
        .col-md-2
          input#phone_num_from_db.form-control.p-2.m-0.pl-2(value=proprietar.phone disabled)

      br
      br
      #dialog-confirm(title='Sunteti siguri?')
        p#dialog-message(style='display: none;')
          span.ui-icon.ui-icon-alert(style='float:left; margin:12px 12px 20px 0; z-index: 7;')
          | Stergerea acest proprietar este permanenta, si toate animalele si tratamentele asociate vor fii sterse in mod permanent.


      h4 Animale
      hr

      .row
        .col-md-10
          button.btn.btn-dark.active(type='button', data-toggle='modal', data-target='#animalModal' style='font-size:15px; width: 180px; height: 40px;') Adauga Animal 
            i.fab.fa-earlybirds(style='margin-left: 5px;')

          #animalModal.modal.fade(tabindex='-1', role='dialog', aria-labelledby='animalModalLabel', aria-hidden= hidden, style='margin-top: 5%;')
            .modal-dialog(role='document')
              .modal-content(style='border-radius: 8px;')
                .modal-header.modal-header-dark
                  h5#animalModalLabel.modal-title Animal Nou 
                    i.fab.fa-earlybirds(style='margin-left: 5px;')
                  button.close(type='button', data-dismiss='modal', aria-label='Close')
                    span(aria-hidden='true' style='color: white;') ×
                .modal-body
                  .row 
                    .col-md-10.offset-md-1
                      form#animal-form(method='POST', action='/proprietari/'+proprietar._id+'/animals/add')
                        .row
                          .col-md-5
                            #form-group 
                              label Proprietar
                              input#animal_proprietar_modal.proprietar_name.form-control(name='proprietar', type='text' disabled value=proprietar.name)
                          .col-md-7
                            #form-group 
                              label Nr. Matricol / Nume
                              input#animal_name_modal.form-control(name='registration_nr', type='text' required oninvalid="this.setCustomValidity('Acest camp este obligatoriu')" oninput="setCustomValidity('')") 
                        br
                        .row
                          .col-md-5
                            #form-group 
                              label Specia
                              select#animal_species_modal.form-control(name='species', type='text' required oninvalid="this.setCustomValidity('Acest camp este obligatoriu')" oninput="setCustomValidity('')") 
                                option(value='', selected='', disabled='') Alegeti
                                option(value='Canina') Canina
                                option(value='Felina') Felina
                                option(value='Bovina') Bovina
                                option(value='Cabalina') Cabalina
                                option(value='Suina') Suina
                                option(value='Ovina') Ovina
                                option(value='Pasare') Pasare
                          .col-md-7
                            #form-group 
                              label Animale Tratate
                              +input_num('quantity')
                        br
                        hr
                        br
                        #form-group 
                          label(style="margin-right: 30px; font-size: 13px; color: #2D2F30; text-decoration: underline;") Clinic Sanatos?
                          input#clinicSanatos.form-check-input(type='checkbox' style='margin: 0px;' data-group-cls="btn-group-sm")
                        br
                        .row
                          .col-md-6
                            #form-group 
                              label Simptomatologie
                              textarea#simptomatologie_modal.form-control(name='simptomatologie') 
                          .col-md-6
                            label Diagnosticul
                            textarea#diagnosticul_modal.form-control(name='diagnostic') 
                        br
                        .modal-footer
                          button#save-animal.btn.btn-primary(type='submit' disabled) Salveaza
                          button.btn.btn-secondary(type='button', data-dismiss='modal') Inchide
        

          #proprietarModal.modal.fade(tabindex='-1', role='dialog', aria-labelledby='proprietarModalLabel', aria-hidden= hidden, style='margin-top: 5%;')
            .modal-dialog(role='document')
              .modal-content(style='border-radius: 8px;')
                .modal-header.modal-header-primary
                  h5#proprietarModalLabel.modal-title= proprietar.name
                  button.close(type='button', data-dismiss='modal', aria-label='Close')
                    span(aria-hidden='true') ×
                .modal-body
                  .row 
                    .col-md-10.offset-md-1
                      form#proprietar-form(method='POST', action='/proprietari/edit/'+proprietar._id)
                        #form-group
                          label Nume:
                          input#name.form-control(name='name', type='text', value=proprietar.name required oninvalid="this.setCustomValidity('Acest camp este obligatoriu')" oninput="setCustomValidity('')") 
                        br
                        #form-group 
                          label Adresa:
                          input.form-control(name='address', type='text', value=proprietar.address required oninvalid="this.setCustomValidity('Acest camp este obligatoriu')" oninput="setCustomValidity('')")
                        br
                        #form-group 
                          label Nr Tel:
                          input#phone_num.form-control(name='phone', type='text', value=proprietar.phone)
                        br
                        .modal-footer
                          button#save-proprietar.btn.btn-primary.float-right(type='submit') Salveaza
                          button.btn.btn-secondary.float-right(type='button', data-dismiss='modal') Inchide

                      br
                      hr
                      a.btn.btn-outline-danger.delete-proprietar(href='#' style= 'margin-left: 25%;' data-id=proprietar._id) Stergeti Acest Proprietar


      br
      br
      .col-md-12(style='overflow-x:auto; min-height: 200px; max-height: 200px; overflow-y:scroll;')
        table.table(style='min-width: 500px; font-size: 14px;')
          thead
            tr
              th Nr. Matricol / Nume
              th Specie
              th Cantitate
              th Simptomatologie
              th Diagnosticul
          each animal, i in animals
            tbody
              tr
                td.align-middle
                  a(href='/proprietari/'+proprietar._id+'/animals/' + animal._id)= animal.registration_nr
                td.align-middle= animal.species
                td.text-center.align-middle= animal.quantity
                td= animal.simptomatologie
                td= animal.diagnostic
                  
